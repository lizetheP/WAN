---------------------------------------------------------------
Configuración del router R1
---------------------------------------------------------------
enable
config t

hostname R1

service password-encryption

enable secret class

no ip domain-lookup

banner motd # Unauthorized access is strictly prohibited. #

line con 0
password cisco
login
logging sync
exit

line vty 0 4
password cisco
login
exit

int Lo0
ip add 192.168.20.1 255.255.255.0
no shut
exit

int g0/1
ip address 192.168.10.1 255.255.255.0
no shut
exit

int s0/1/0
ip address 10.1.1.1 255.255.255.252
clock rate 128000
no shut
exit

router ospf 1
network 192.168.10.0 0.0.0.255 area 0
network 192.168.20.0 0.0.0.255 area 0
network 10.1.1.0 0.0.0.3 area 0
exit


---------------------------------------------------------------
Configuración del router ISP
---------------------------------------------------------------
enable
config t
hostname ISP
service password-encryption
enable secret class
no ip domain-lookup

banner motd # Unauthorized access is strictly prohibited. #

line con 0
password cisco
login
logging sync

line vty 0 4
password cisco
login

int Lo0
ip add 209.165.200.225 255.255.255.224
no shut

int Lo1
ip add 209.165.201.1 255.255.255.224
no shut

int s0/1/0
ip address 10.1.1.2 255.255.255.252
no shut

int s0/1/1
ip address 10.2.2.2 255.255.255.252
clock rate 128000
no shut

router ospf 2
network 209.165.200.224 0.0.0.31 area 0
network 209.165.201.0 0.0.0.31 area 0
network 10.1.1.0 0.0.0.3 area 0
network 10.2.2.0 0.0.0.3 area 0

---------------------------------------------------------------
Configuración del router R3
---------------------------------------------------------------
enable
config t

hostname R3

service password-encryption

enable secret class

no ip domain-lookup

banner motd # Unauthorized access is strictly prohibited. #

line con 0
password cisco
login
logging sync
exit

line vty 0 4
password cisco
login
exit

int g0/1
ip address 192.168.30.1 255.255.255.0
no shut
exit

int Lo0
ip add 192.168.40.1 255.255.255.0
no shut
exit

int s0/1/1
ip address 10.2.2.1 255.255.255.252
no shut
exit

router ospf 3
network 192.168.30.0 0.0.0.255 area 0
network 192.168.40.0 0.0.0.255 area 0
network 10.2.2.0 0.0.0.3 area 0
exit

ip domain-name cisco.com
username admin privilege 15 secret class
crypto key generate rsa
!Press enter and then type the value of 1024

line vty 0 4
login local
transport input ssh
exit

!------------------------------------------------------------------------
!Lista de acceso extendidas (lo más cerca del origen)
!------------------------------------------------------------------------
!1. Permita que el tráfico web que se origina en la red 192.168.10.0/24
!   vaya a cualquier red.
!2. Permita una conexión SSH a la interfaz serial de R3 desde la PC-A.
!3. Permita que los usuarios de la red 192.168.10.0/24 
!   accedan a la red 192.168.20.0/24
!----------
!Router 1
!----------
access-list 100 remark Permite acceso por Web, SSH e IP
access-list 100 permit tcp 192.168.10.0 0.0.0.255 any eq 80
access-list 100 permit tcp host 192.168.10.3 host 10.2.2.1 eq 22
access-list 100 permit ip 192.168.10.0 0.0.0.255 192.168.20.0 0.0.0.255   
access-list 100 deny ip any any

int g0/1
ip access-group 100 in 

MODIFICACIÓN ACLS

all traffic between the 192.168.10.0/24 and 192.168.30.0/24 
networks should be allowed.

ip access-list extended 100 
40 permit ip 192.168.10.0 0.0.0.255 192.168.30.0 0.0.0.255 

!----------
!Router 3
!----------
!4. Permita que el tráfico web que se origine en la red 192.168.30.0/24 
!   acceda a R1 (s0/1/0) y a la red 209.165.200.224/27 
!   en el ISP. NO se debe permitir que la red 192.168.30.0/24 acceda 
!   a ninguna otra red a través de la web.

NAMED EXTENDED ACL ON R3

ip access-list extended WEB-POLICY
permit tcp 192.168.30.0 0.0.0.255 host 10.1.1.1 eq 80
permit tcp 192.168.30.0 0.0.0.255 209.165.200.224 0.0.0.31 eq 80 

int g0/1
ip access-group WEB-POLICY in

MODIFICACIÓN

ip access-list extended WEB-POLICY
30 permit ip 192.168.30.0 0.0.0.255 192.168.10.0 0.0.0.255
end